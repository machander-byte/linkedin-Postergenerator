Project: news2linkedin — Status & Next Steps

1) Overview
- Fetches recent tech news from RSS (and optional NewsAPI).
- Deduplicates using a tiny SQLite DB at src/fetch_news.py -> data/seen.db.
- Summarizes article text (Trafilatura when available; BeautifulSoup fallback).
- Renders branded poster images via Pillow in out/.
- Optional LinkedIn image post flow (currently dry-run in src/main.py).

2) What’s Working Now
- Dev test generates a poster: run dev_test.py to create out/test_poster.png.
- Summarizer is resilient: if Trafilatura/lxml is missing, falls back to BeautifulSoup.
- Pillow import issue fixed by installing a compatible wheel (Pillow 11.3.0).
- VS Code debug configs added to run dev_test and the main module easily.

3) How To Run
- Dev test (recommended first):
  - VS Code: select "news2linkedin: dev_test.py" and run (F5).
  - Or terminal: news2linkedin/.venv/Scripts/python.exe news2linkedin/dev_test.py
- Main flow (generates multiple posters, dry-run posting):
  - VS Code: select "news2linkedin: Run main (module)".
 - Scripts (Windows):
  - Run once with logging: powershell -File news2linkedin/scripts/run_main.ps1
  - Schedule daily (08:30): powershell -File news2linkedin/scripts/schedule_daily.ps1 -At 08:30
  - Produces images in news2linkedin/out/ and prints "Would post …".

4) Configuration
- Edit news2linkedin/.env for:
  - BRAND_NAME, LOGO_PATH, TIMEZONE, POSTER_FORMAT (square|landscape), MAX_POSTS
  - DRY_RUN (true|false), HASHTAGS, FOOTER_TEXT
  - Optional NewsAPI: NEWS_API_KEY
  - LinkedIn: LINKEDIN_CLIENT_ID, LINKEDIN_CLIENT_SECRET, LINKEDIN_REDIRECT_URI,
    LINKEDIN_AUTHOR_URN, and either LINKEDIN_ACCESS_TOKEN or LINKEDIN_REFRESH_TOKEN
- Fonts: place preferred TTFs in assets/fonts/ (Poppins-SemiBold.ttf, Inter-Regular.ttf).

5) Remaining Work / TODO
- LinkedIn posting
  - Provide tokens in .env and test upload/post.
  - DRY_RUN toggle added in config; switch via .env.
  - Add alt-text and better error handling for API responses.
- Summarization quality
  - Install lxml to enable full Trafilatura extraction if desired.
  - Add basic heuristics (source-specific cleanups, language detection, max-length trim).
- Scheduling & automation
  - Scripts included to run once and schedule daily via Windows Task Scheduler.
- Logging & resilience
  - Structured logging, retries with backoff, and clear user-facing messages.
  - Handle network timeouts and partial failures more gracefully.
- Configuration polish
  - .env.example added; hashtags and footer text configurable.
  - Add simple validation for required vars.
- Assets & branding
  - Confirm brand colors, spacing, and test both square and landscape layouts.
- Requirements & tooling
  - Update requirements.txt to Pillow>=11.3.0 (current working version).
  - Optionally pin/compile deps, add basic linting/format (ruff/black) and unit tests.
- Data handling
  - Improve de-duplication (e.g., normalize by domain+title), add seen retention windows.

6) Known Issues / Tips
- PowerShell prompt about untrusted scripts: set once per user
  Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
- If Trafilatura raises lxml.etree errors, either install lxml or rely on the fallback.
- Ensure VS Code uses the venv interpreter at news2linkedin/.venv.

7) Suggested Next Steps (pick one path)
- Branding pass: set BRAND_NAME/LOGO_PATH/POSTER_FORMAT and verify poster output.
- Enable real posting: fill LinkedIn vars in .env, add DRY_RUN flag, and test one post.
- Improve summaries: install lxml and re-run to compare extraction quality.
